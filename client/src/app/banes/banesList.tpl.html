<main-wrap subnav-toggle="true" toolbar-template="app/banes/banes.header.tpl.html" layout="column" flex>

    <md-content class="paper-bg" layout="row" flex layout-align="space-between start">
      <div class="inner-pad" flex layout="column">

          <div class="right-toc-sidebar title-only">
          <div class="inner-wrap" ng-class="{ expanded: sidebarExpanded }">
            <!-- <div ng-include="'app/core/tableOfContents.tpl.html'"></div> -->
            <!-- <div class="bottom-toc-footer"> -->
              <md-button class="sidebar-pinned md-primary md-icon-button md-raised" class="md-raised" ng-click="sidebarExpanded = !sidebarExpanded">
                <md-icon ng-if="!sidebarExpanded" size="md" aria-label="Expand Icon" md-svg-icon="menu-down"></md-icon>
                <md-icon ng-if="sidebarExpanded" size="md" aria-label="Collapse Icon" md-svg-icon="menu-up"></md-icon>
                <md-tooltip>{{ (sidebarExpanded) ? 'Show Less' : 'Show More' }}</md-tooltip>
              </md-button>
            <!-- </div> -->
            <div layout-padding="lg-b lg-l lg-r">
            <br>
              <strong layout-padding="lg-t">Table of Contents</strong>
              <div id="toc">
                <ul>
                  <li ng-repeat="item in banesCtrl.items | filter:banesCtrl.textSearchFilter(item) | filter:banesCtrl.powerLevelFilter(item) track by $index">
                    <a ng-href="{{ '#' + banesCtrl.Link.nameToUrlPath(item.name) }}">{{ item.name }}</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>

        <md-list class="paper-bg list-fill" layout-padding="lg" flex>

          <div ng-if="!banesCtrl.headerForm.$pristine" class="md-primary">
            <md-button class="md-default" ng-click="banesCtrl.forceHeaderOpen = !banesCtrl.forceHeaderOpen">
              <md-icon ng-if="!banesCtrl.forceHeaderOpen" size="lg" aria-label="Plus Icon" md-svg-icon="plus"></md-icon>
              <md-icon ng-if="banesCtrl.forceHeaderOpen" size="lg" aria-label="Minus Icon" md-svg-icon="minus"></md-icon>
              {{ (banesCtrl.forceHeaderOpen) ? 'Hide' : 'Show' }} Explanation
            </md-button>
          </div>

          <div class="accordion" ng-class="{ 'expanded': ( banesCtrl.forceHeaderOpen || banesCtrl.headerForm.$pristine) }">
            <h1 class="md-display-2">Banes</h1>
            <h2 class="md-display-1">Reading a Bane Description</h2>
            <p>Below, each bane description includes the following elements.</p>
            <p><strong>Power Level</strong>. This number indicates the required attribute score needed to inflict the bane. If multiple power levels are listed (such as 2 / 4 / 6), then the bane can be inflicted at multiple tiers of power. The Persistent Damage bane, for example, deals increased damage as you inflict it at higher power levels.</p>
            <p><strong>Attack Attributes</strong>. This is a list of the attribute or attributes that can be used to inflict the bane. As long as you possess at least one of the listed attributes at a score greater than or equal to the Power Level, then you can inflict the bane.</p>
            <p><strong>Attack</strong>. This list indicates what type of attack roll to make when inflicting the bane. Each entry consists of an attribute that the attacking player should roll and the defense score targeted by the attack. If the attacker’s roll equals or exceeds the target’s defense score, then the bane is inflicted.</p>
            <p><strong>Duration</strong>. A bane typically remains in effect until the target resists it using a resist action, hence most banes have a duration of “resist ends”. If a target fails three resist rolls against a bane, the bane can no longer be resisted. It persists for an extended duration indicated in parentheses.</p>
            <p><strong>Description</strong>. This entry simply provides a general idea of what the bane could look like in the story.</p>
            <p><strong>Effect</strong>. This entry indicates the mechanical effects of the bane on the rules of the game.</p>
          </div>

          <md-list-item id="{{ banesCtrl.Link.nameToUrlPath(item.name) }}" ng-repeat="item in banesCtrl.items | filter:banesCtrl.textSearchFilter(item) | filter:banesCtrl.powerLevelFilter(item) track by $index">
            <div class="md-list-item-text">
              <h2 class="md-display-1">
                {{item.name}}&nbsp;&nbsp;
                <md-button class="md-icon-button md-exclude" ui-sref="banesSingle({ name: banesCtrl.Link.nameToUrlPath(item.name) })" ui-sref-opts="{ reload: true }">
                  <md-icon size="lg" aria-label="Link Icon" md-svg-icon="share"></md-icon>
                  <md-tooltip md-direction="bottom">View this Bane</md-tooltip>
                </md-button>
                <md-button ng-if="$mdMedia('gt-sm')" class="md-icon-button md-exclude" ng-click="banesCtrl.Link.copyLinkToClip( [item], 'banes')">
                  <md-icon size="lg" aria-label="Link Icon" md-svg-icon="link-variant"></md-icon>
                  <md-tooltip md-direction="bottom">Copy Link</md-tooltip>
                </md-button>
              </h2>
              <p>
                <strong>Duration:</strong> {{item.duration}}
              </p>
              <p><strong>Power Level:</strong>
                <span ng-repeat="power in item.power track by $index">
                  <span ng-if="$index != 0"> / </span>
                  {{power}}
                </span>
              </p>
              <p>
                <strong>Attack Attributes:</strong>
                <span ng-repeat="attackAttribute in item.attackAttributes track by $index">
                <span ng-if="$index != 0">, </span>
                  {{attackAttribute}}
                </span>
              </p>
              <p>
                <strong>Attack:</strong>
              </p>
              <p>
              <ul>
                <li ng-repeat="attack in item.attack track by $index">
                  {{attack}}
                </li>
              </ul>

              </p>
              <p ng-if="item.description">
                <strong>Description</strong>
                <p ng-bind-html="item.description | unsafe"></p>
              </p>
              <p ng-if="item.effect">
                <strong>Effect</strong>
                 <p ng-bind-html="item.effect | unsafe"></p>
              </p>
              <p ng-if="item.special">
                <strong>Special</strong>
                <p ng-bind-html="item.special | unsafe"></p>
              </p>
              <br><br>
            </div>
            <md-divider ng-if="!$last"></md-divider>
          </md-list-item>
        </md-list>
        <div flex class="dark-bg">
          <div md-theme="dark" ng-include="'common/directives/mainwrap/footer.tpl.html'"></div>
        </div>

      </div>

    </md-content>

</main-wrap>
